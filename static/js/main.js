!function(e){function t(t){for(var a,o,s=t[0],i=t[1],l=t[2],d=0,j=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(c,o)&&c[o]&&j.push(c[o][0]),c[o]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);for(u&&u(t);j.length;)j.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,s=1;s<n.length;s++){var i=n[s];0!==c[i]&&(a=!1)}a&&(r.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},c={1:0},r=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(e){var t=[],n=c[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((function(t,a){n=c[e]=[t,a]}));t.push(n[2]=a);var r,s=document.createElement("script");s.charset="utf-8",s.timeout=120,o.nc&&s.setAttribute("nonce",o.nc),s.src=function(e){return o.p+"static/js/"+({}[e]||e)+"."+{3:"277bbfb6"}[e]+".chunk.js"}(e);var i=new Error;r=function(t){s.onerror=s.onload=null,clearTimeout(l);var n=c[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;i.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",i.name="ChunkLoadError",i.type=a,i.request=r,n[1](i)}c[e]=void 0}};var l=setTimeout((function(){r({type:"timeout",target:s})}),12e4);s.onerror=s.onload=r,document.head.appendChild(s)}return Promise.all(t)},o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/",o.oe=function(e){throw console.error(e),e};var s=this["webpackJsonpjira-worklog-chrome-ext"]=this["webpackJsonpjira-worklog-chrome-ext"]||[],i=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=i;r.push([8,2]),n()}({13:function(e,t,n){},14:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(6),o=n.n(r),s=(n(13),n(14),n(7)),i=n(2),l=n(0),u=function(e){var t=e.cellData,n=e.onProductTableUpdate;return Object(l.jsx)("td",{children:Object(l.jsx)("input",{type:t.type,className:"class_".concat(t.class),placeholder:t.name,name:t.class,id:t.id,value:t.value,onChange:n})})},d=function(e){var t=e.onProductTableUpdate,n=e.issue,a=e.onDelEvent;return Object(l.jsxs)("tr",{className:"eachRow",children:[Object(l.jsx)(u,{onProductTableUpdate:t,cellData:{type:"text",name:"Issue",value:n.issue,id:n.id,class:"issue"}}),Object(l.jsx)(u,{onProductTableUpdate:t,cellData:{type:"text",name:"1d | 1h | 1m",value:n.timeSpent,id:n.id,class:"timeSpent"}}),Object(l.jsx)(u,{onProductTableUpdate:t,cellData:{type:"date",name:"Log Date",value:n.logDate,id:n.id,class:"logDate"}}),Object(l.jsx)(u,{onProductTableUpdate:t,cellData:{type:"text",name:"Comments",value:n.comments,id:n.id,class:"comments"}}),Object(l.jsx)("td",{className:"del-cell",children:Object(l.jsx)("input",{type:"button",onClick:function(){a(n)},value:"-",className:"del-btn"})})]})},j=function(e){var t=e.onProductTableUpdate,n=e.onRowDel,a=e.filterText,c=e.issues.map((function(e){if(-1!==e.issue.indexOf(a))return Object(l.jsx)(d,{onProductTableUpdate:t,issue:e,onDelEvent:n.bind(this)},e.id)}));return Object(l.jsx)("div",{className:"tableContainer",children:Object(l.jsxs)("table",{className:"table",children:[Object(l.jsx)("thead",{children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{children:"Issue"}),Object(l.jsx)("th",{children:"Time Spent"}),Object(l.jsx)("th",{children:"Date"}),Object(l.jsx)("th",{children:"Comments"})]})}),Object(l.jsx)("tbody",{children:c})]})})},b=function(e){var t=c.a.useRef();return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("input",{type:"text",placeholder:"Search for issue...",className:"class_search",value:e.filterText,ref:t,onChange:function(){e.onUserInput(t.current.value)}})})},p=function(e){var t=Object(a.useState)(!1),n=Object(i.a)(t,2),c=n[0],r=n[1],o=Object(a.useState)(""),u=Object(i.a)(o,2),d=u[0],p=u[1],f=Object(a.useState)(!1),h=Object(i.a)(f,2),m=h[0],v=h[1],O=Object(a.useState)([]),x=Object(i.a)(O,2),g=x[0],y=x[1],S=Object(a.useState)(""),T=Object(i.a)(S,2),D=T[0],w=T[1],C=Object(a.useState)(""),P=Object(i.a)(C,2),k=P[0],N=P[1],U=Object(a.useState)([{id:1,issue:"",timeSpent:"",logDate:"".concat((new Date).toISOString().split("T")[0]),comments:""}]),E=Object(i.a)(U,2),I=E[0],L=E[1];Object(a.useEffect)((function(){chrome.tabs&&chrome.tabs.query({active:!0,lastFocusedWindow:!0},(function(e){var t=e[0].url;N(t.split("/")[2])}))}),[]);return Object(l.jsxs)("div",{children:[Object(l.jsxs)("div",{className:"searchOrAdd",children:[Object(l.jsx)(b,{filterText:d,onUserInput:function(e){p(e)}}),Object(l.jsx)("button",{type:"button",onClick:function(e){var t={id:(+new Date+Math.floor(999999*Math.random())).toString(36),issue:"",timeSpent:"",logDate:"".concat((new Date).toISOString().split("T")[0]),comments:""};L([].concat(Object(s.a)(I),[t]))},className:"btn btn-add",children:"Add New Log"})]}),Object(l.jsxs)("div",{className:"autoCommentContainer",children:[Object(l.jsx)("input",{type:"checkbox",id:"commentCheckBox",defaultChecked:c,onChange:function(){return r(!c)}}),Object(l.jsx)("label",{htmlFor:"commentCheckBox",children:"Include Auto Comment"})]}),Object(l.jsx)(j,{onProductTableUpdate:function(e){var t={id:e.target.id,name:e.target.name,value:e.target.value},n=I.slice().map((function(e){for(var n in e)n===t.name&&String(e.id)===t.id&&(e[n]=t.value,"issue"===n&&c&&(e.comments="worked on issue "+t.value));return e}));L(n)},onRowDel:function(e){var t=I.indexOf(e),n=I.filter((function(e,n,a){return a[n]!==a[t]}));L(n)},issues:I,filterText:d}),m?Object(l.jsx)("span",{children:"Saving........"}):Object(l.jsx)("button",{type:"button",className:"btn btn-save",onClick:function(){y([]),v(!0);var e=I&&Array.isArray(I)&&I.filter((function(e){return e.issue})).map((function(e){var t=e.logDate.split("-"),n='{\n                "timeSpent": "'.concat(e.timeSpent,'",\n                "comment": {\n                  "type": "doc",\n                  "version": 1,\n                  "content": [\n                    {\n                      "type": "paragraph",\n                      "content": [\n                        {\n                          "text": "').concat(e.comments,'",\n                          "type": "text"\n                        }\n                      ]\n                    }\n                  ]\n                },\n                "started":  "').concat(t[0],"-").concat(t[1],"-").concat(t[2],'T18:00:00.751+0000"\n            }');return fetch("https://".concat(k,"/rest/api/3/issue/").concat(e.issue,"/worklog"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:n}).then((function(e){return e.json()})).then((function(t){return{issue:e.issue,data:t}})).catch((function(t){return{issue:e.issue,data:"",error:t}}))}));Promise.allSettled(e).then((function(e){console.log("results ",e),v(!1),y(e)})).catch((function(e){w(e),v(!1)}))},children:"Save Work Logs"}),g.length>0&&Object(l.jsxs)("div",{className:"logDetails",children:["Log details : ",Object(l.jsx)("ul",{children:g.map((function(e,t){var n,a,c,r,o,s;return Object(l.jsxs)("li",{className:"logRow",children:[e.value.issue?e.value.issue:" ",e.value.data&&!e.value.data.errorMessages?Object(l.jsxs)("div",{children:[Object(l.jsxs)("span",{children:[" : Time Spent : ",e.value.data.timeSpent]}),Object(l.jsxs)("span",{children:[",  Date : ",(null===(n=e.value)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.started)?null===(c=e.value.data.started)||void 0===c||null===(r=c.split("T"))||void 0===r?void 0:r[0]:""]}),"  ",(null===(o=e.value.data)||void 0===o?void 0:o.self)&&Object(l.jsx)("button",{className:"logDelBtn",onClick:function(){return n=e.value.data.self,a=t,void fetch("".concat(n),{method:"DELETE"}).then((function(e){return e.text()})).then((function(e){var t=g.filter((function(e,t){return t!==a}));y(t)})).catch((function(e){return console.error(e)}));var n,a},children:"Delete log"})]}):Object(l.jsxs)("span",{style:{color:"red"},children:[": ",null===(s=e.value.data.errorMessages)||void 0===s?void 0:s.join(",")]})]},t)}))})]}),D&&Object(l.jsxs)("span",{children:["Something went wrong ",D]})]})};var f=function(){return Object(l.jsx)("div",{className:"App",children:Object(l.jsx)(p,{})})},h=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,18)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),r(e),o(e)}))};o.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(f,{})}),document.getElementById("root")),h()},8:function(e,t,n){e.exports=n(17)}});
//# sourceMappingURL=main.js.map