!function(e){function t(t){for(var c,o,s=t[0],i=t[1],u=t[2],j=0,d=[];j<s.length;j++)o=s[j],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&d.push(r[o][0]),r[o]=0;for(c in i)Object.prototype.hasOwnProperty.call(i,c)&&(e[c]=i[c]);for(l&&l(t);d.length;)d.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],c=!0,s=1;s<n.length;s++){var i=n[s];0!==r[i]&&(c=!1)}c&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var c={},r={1:0},a=[];function o(t){if(c[t])return c[t].exports;var n=c[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=c,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)o.d(n,c,function(t){return e[t]}.bind(null,c));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var s=this["webpackJsonpjira-work-log-extension"]=this["webpackJsonpjira-work-log-extension"]||[],i=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=i;a.push([27,2]),n()}({23:function(e,t,n){},27:function(e,t,n){e.exports=n(39)},39:function(e,t,n){"use strict";n.r(t);var c,r,a,o,s=n(2),i=n(18),u=n.n(i),l=n(5),j=n(12),d=n(25),b=n(7),O=n(6),m=n(40),v=n(41),p="TOGGLE_AUTO_COMMENT",f="ADD_NEW_ROW",h="EDIT_ACTION",g="DELETE_ROW",x="FILTER_BY",y="SAVE_DOMAIN",k="TOGGLE_SHOW_TASK",w=Object(v.a)(f),S=Object(v.a)(h),T=Object(v.a)(g),N=Object(v.a)(x),C=Object(v.a)("RESET_STORE"),_=n(26),D={workLogItems:[],filterBy:{}},L=(c={},Object(b.a)(c,w,(function(e){var t,n={id:Object(_.a)(),issue:"",timeSpent:"",logDate:"".concat((new Date).toISOString().split("T")[0]),comment:""},c=(null===(t=e.workLogItems)||void 0===t?void 0:t.slice())||[];return c.push(n),Object(O.a)(Object(O.a)({},e),{},{workLogItems:c})})),Object(b.a)(c,S,(function(e,t){var n=t.payload,c=n.id,r=n.value,a=n.name,o=e.workLogItems.map((function(e){return e.id===c&&("issue"===a?e.issue=r:"timeSpent"===a?e.timeSpent=r:"comment"===a?e.comment=r:"logDate"===a&&(e.logDate=r)),e}));return Object(O.a)(Object(O.a)({},e),{},{workLogItems:o})})),Object(b.a)(c,T,(function(e,t){var n=t.payload.id,c=e.workLogItems.filter((function(e){return e.id!==n}));return Object(O.a)(Object(O.a)({},e),{},{workLogItems:c})})),Object(b.a)(c,N,(function(e,t){var n=t.payload,c=n.value,r=n.name;return Object(O.a)(Object(O.a)({},e),{},{filterBy:{value:c,name:r}})})),Object(b.a)(c,C,(function(){return Object(O.a)({},D)})),c),E=Object(m.a)(L,D),I=Object(v.a)(p),A=Object(v.a)(k),P=(r={},Object(b.a)(r,I,(function(e){return Object(O.a)(Object(O.a)({},e),{},{autoComment:!e.autoComment})})),Object(b.a)(r,A,(function(e){return Object(O.a)(Object(O.a)({},e),{},{showTask:!e.showTask})})),r),R=Object(m.a)(P,{autoComment:!1,showTask:!1}),M=Object(v.a)(y),G=Object(v.a)("PUT_ERROR"),F=(a={},Object(b.a)(a,M,(function(e,t){var n=t.payload.domain;return Object(O.a)(Object(O.a)({},e),{},{domain:n})})),Object(b.a)(a,G,(function(e,t){var n=t.payload.error;return Object(O.a)(Object(O.a)({},e),{},{error:n})})),a),B=Object(m.a)(F,{domain:"",error:""}),W=Object(v.a)("SAVE_LOGS"),V=Object(v.a)("SAVE_STATUS"),q=Object(v.a)("UPDATE_SAVED_LOGS"),U=Object(v.a)("RESET_SAVED_LOGS"),H=(o={},Object(b.a)(o,W,(function(e){return Object(O.a)(Object(O.a)({},e),{},{savingInProgress:!0})})),Object(b.a)(o,V,(function(e,t){var n=t.payload.inProgress;return Object(O.a)(Object(O.a)({},e),{},{savingInProgress:n})})),Object(b.a)(o,q,(function(e,t){var n=t.payload.savedLogs;return console.log("updateSavedLogs",n),Object(O.a)(Object(O.a)({},e),{},{savedLogs:n})})),Object(b.a)(o,U,(function(e){return Object(O.a)(Object(O.a)({},e),{},{saveLogs:[]})})),o),J=Object(m.a)(H,{savingInProgress:!1,savedLogs:[]}),K=Object(j.combineReducers)({worklogs:E,options:R,home:B,loggedDetails:J}),Y=n(10),z=n.n(Y),Q=n(9),X=z.a.mark(ee),Z=z.a.mark(te),$=z.a.mark(ne);function ee(e){var t,n;return z.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(Q.d)((function(e){return e.home.domain}));case 2:return t=c.sent,n=e&&Array.isArray(e)&&e.filter((function(e){return e.issue})).map((function(e){var n=e.logDate.split("-"),c='{\n            "timeSpent": "'.concat(e.timeSpent,'",\n            "comment": {\n              "type": "doc",\n              "version": 1,\n              "content": [\n                {\n                  "type": "paragraph",\n                  "content": [\n                    {\n                      "text": "').concat(e.comment,'",\n                      "type": "text"\n                    }\n                  ]\n                }\n              ]\n            },\n            "started":  "').concat(n[0],"-").concat(n[1],"-").concat(n[2],'T18:00:00.751+0000"\n        }');return fetch("https://".concat(t,"/rest/api/3/issue/").concat(e.issue,"/worklog"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:c}).then((function(e){return e.json()})).then((function(t){return{issue:e.issue,data:t}})).catch((function(t){return{issue:e.issue,data:"",error:t}}))})),c.abrupt("return",n);case 5:case"end":return c.stop()}}),X)}function te(e){var t,n;return z.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,Object(Q.c)(U());case 3:return c.next=5,Object(Q.c)(G({error:""}));case 5:return c.next=7,Object(Q.b)(ee,e.payload);case 7:return t=c.sent,console.log("promises ",t),c.next=11,Promise.allSettled(t).then((function(e){return console.log("Promise results ",e),e})).catch((function(e){return e}));case 11:return n=c.sent,console.log("final data ",n),c.next=15,Object(Q.c)(q({savedLogs:n}));case 15:return c.next=17,Object(Q.c)(V({inProgress:!1}));case 17:c.next=26;break;case 19:return c.prev=19,c.t0=c.catch(0),c.next=23,Object(Q.c)(V({inProgress:!1}));case 23:return c.next=25,Object(Q.c)(G({error:"something went wrong, try submiting again with correct data."}));case 25:console.log("erro in saga ",c.t0);case 26:case"end":return c.stop()}}),Z,null,[[0,19]])}function ne(){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Q.a)([Object(Q.e)(W,te)]);case 2:case"end":return e.stop()}}),$)}var ce=z.a.mark(re);function re(){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Q.a)([ne()]);case 2:case"end":return e.stop()}}),ce)}var ae=re,oe=n(24),se=Object(d.a)(),ie=[se],ue=[];ie.length>0&&ue.push(j.applyMiddleware.apply(void 0,ie));var le=Object(j.createStore)(K,oe.composeWithDevTools.apply(void 0,ue));se.run(ae,le.dispatch);var je=le,de=(n(23),n(1)),be=function(e){var t=Object(l.b)();return Object(de.jsx)(de.Fragment,{children:Object(de.jsx)("input",{placeholder:e.placeholder,name:e.name,onChange:function(n){t({type:x,payload:{value:n.target.value,name:e.name}})},className:"class_search"})})},Oe=function(){var e=Object(l.b)();return Object(de.jsxs)("div",{className:"searchOrAdd",children:[Object(de.jsx)(be,{name:"filterByIssue",placeholder:"Filter by issue/comment"}),Object(de.jsx)("button",{className:"btn-add",onClick:function(){return e({type:f})},children:"Add New"})]})},me=n(17);var ve=function(e){var t,n=Object(s.useState)(0),c=Object(me.a)(n,2),r=c[0],a=c[1],o=Object(s.useState)([]),i=Object(me.a)(o,2),u=i[0],j=i[1],d=Object(s.useState)(!1),b=Object(me.a)(d,2),O=b[0],m=b[1],v=Object(s.useState)(e.value),p=Object(me.a)(v,2),f=p[0],g=p[1],x=Object(l.c)((function(e){var t;return null===(t=e.options)||void 0===t?void 0:t.autoComment})),y=Object(l.c)((function(e){var t;return null===(t=e.options)||void 0===t?void 0:t.showTask})),k=Object(l.c)((function(e){var t;return null===(t=e.home)||void 0===t?void 0:t.domain})),w=Object(l.b)(),S=function(e){var t=function(e){var t=e.domain,n=e.query,c=e.showSubTasks,r=void 0!==c&&c;return{url:"https://".concat(t,"/rest/api/3/issue/picker?query=").concat(n,"&showSubTasks=").concat(r),header:{method:"GET",headers:{Accept:"application/json"}}}}({domain:k,query:e,showSubTasks:y}),n=t.url,c=t.header;e&&fetch(n,c).then((function(e){return e.json()})).then((function(e){var t,n,c,r=(null===e||void 0===e||null===(t=e.sections)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.issues.length)>0?null===(c=e.sections)||void 0===c?void 0:c[0].issues:[];j(r),a(0),m(!0)})).catch((function(e){console.error(e),j([]),m(!1)}))},T=Object(s.useMemo)((function(){return function(e){var t,n=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return function(){for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];t&&clearTimeout(t),t=setTimeout((function(){e.apply(n,a)}),c)}}(S,300)}),[y]),N=function(t){x&&w({type:h,payload:{id:e.id,name:"comment",value:t&&"worked on issue "+t}})};return O&&f&&(t=u.length?Object(de.jsx)("ul",{className:"suggestions",children:u.map((function(t,n){var c;return n===r&&(c="suggestion-active"),Object(de.jsxs)("li",{className:c,onClick:function(n){return c=t.key,a(0),j([]),m(!1),g(c),w({type:h,payload:{id:e.id,name:e.name,value:c}}),void N(c);var c},children:[Object(de.jsxs)("div",{className:"img-issue-id",children:[Object(de.jsx)("img",{src:"https://irfangg.atlassian.net".concat(t.img)}),Object(de.jsx)("span",{children:t.key})]}),Object(de.jsx)("div",{children:t.summaryText})]},t.id)}))}):Object(de.jsx)("div",{className:"no-options",children:Object(de.jsx)("em",{children:"No matching issues found !"})})),Object(de.jsxs)(de.Fragment,{children:[Object(de.jsx)("input",{type:"text",name:e.name,onChange:function(t){var n=t.currentTarget.value;T(n),g(n),w({type:h,payload:{id:e.id,name:e.name,value:n}}),N(n)},value:f,autoComplete:"off",className:"class_issue",placeholder:"Issue",onKeyDown:function(e){if(13===e.keyCode)a(0),m(!1),console.log("enter ",r,u),g(u[r].key);else if(38===e.keyCode){if(0===r)return;a(r-1)}else if(40===e.keyCode){if(r-1===u.length-2)return;a(r+1),console.log(r)}}}),t]})},pe=function(){var e=Object(l.c)((function(e){var t;return(null===e||void 0===e||null===(t=e.worklogs)||void 0===t?void 0:t.workLogItems)||[]})),t=Object(l.c)((function(e){var t;return(null===e||void 0===e||null===(t=e.worklogs)||void 0===t?void 0:t.filterBy)||{}})),n=Object(l.b)(),c=function(e,t){n({type:h,payload:{id:t,name:e.target.name,value:e.target.value}})};return Object(de.jsxs)("div",{className:"tableContainer",children:[Object(de.jsxs)("div",{className:"headerRow",children:[Object(de.jsx)("div",{className:"class_issue",children:"Issue"}),Object(de.jsx)("div",{className:"class_timeSpent",children:"Time Spent"}),Object(de.jsx)("div",{className:"class_logDate",children:"Date"}),Object(de.jsx)("div",{className:"class_comments",children:"Comment"})]}),e.length>0&&e.filter((function(e){return""!==t.value&&"filterByIssue"===t.name?e.issue.includes(t.value)||e.comment.includes(t.value):e})).map((function(e){return Object(de.jsxs)("div",{style:{display:"flex"},className:"logRow",children:[Object(de.jsx)(ve,{name:"issue",value:e.issue,id:e.id}),Object(de.jsx)("input",{name:"timeSpent",className:"class_timeSpent",placeholder:"1d | 1h | 1m",value:e.timeSpent,onChange:function(t){return c(t,e.id)}}),Object(de.jsx)("input",{name:"logDate",className:"class_logDate",type:"date",value:e.logDate,onChange:function(t){return c(t,e.id)}}),Object(de.jsx)("input",{name:"comment",className:"class_comments",placeholder:"Comment",value:e.comment,onChange:function(t){return c(t,e.id)}}),Object(de.jsx)("button",{className:"del-btn",onClick:function(){return t=e.id,void n({type:g,payload:{id:t}});var t},children:"-"})]},e.id)}))]})};function fe(e){var t=e.className,n=e.clickHandler,c=e.buttonText;return Object(de.jsx)("button",{type:"button",className:t,onClick:n,children:c})}function he(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.worklogs.workLogItems})),n=Object(l.c)((function(e){var t;return(null===e||void 0===e||null===(t=e.loggedDetails)||void 0===t?void 0:t.savingInProgress)||!1})),c=t.filter((function(e){return e.issue}));return Object(de.jsx)(de.Fragment,{children:n?Object(de.jsx)("div",{className:"saveInProgress",children:"Saving........"}):Object(de.jsx)(fe,{className:"btn btn-save",clickHandler:function(){e(W(c))},buttonText:"Save Work Logs"})})}function ge(){var e=Object(l.c)((function(e){return e.home.error})),t=Object(l.b)();return e&&Object(de.jsxs)("div",{className:"error",children:[Object(de.jsx)("div",{children:Object(de.jsx)("a",{href:"#",onClick:function(e){e.preventDefault(),t(G({error:""}))},children:"clear message"})}),Object(de.jsx)("p",{children:e})]})}function xe(){var e=Object(l.c)((function(e){var t;return(null===e||void 0===e||null===(t=e.loggedDetails)||void 0===t?void 0:t.savedLogs)||[]})),t=Object(l.b)();return Object(de.jsx)("div",{className:"savedLogs",children:e.length>0?Object(de.jsxs)(de.Fragment,{children:[Object(de.jsx)("span",{children:"Saved log details:"}),Object(de.jsx)("ul",{className:"logDetails",children:e.map((function(n,c){var r,a,o,s=n.value,i=s.issue,u=s.data;return Object(de.jsxs)("li",{children:[Object(de.jsxs)("span",{children:[i,":"]}),(null===u||void 0===u?void 0:u.self)&&!(null===u||void 0===u?void 0:u.errorMessages)?Object(de.jsxs)("div",{style:{marginLeft:"1em"},children:[Object(de.jsxs)("span",{children:[" Time Spent : ",Object(de.jsx)("strong",{children:u.timeSpent})]}),Object(de.jsxs)("span",{children:[",  Date : ",Object(de.jsx)("strong",{children:(null===u||void 0===u?void 0:u.started)?null===(r=u.started)||void 0===r||null===(a=r.split("T"))||void 0===a?void 0:a[0]:""})]}),"  ",(null===u||void 0===u?void 0:u.self)&&Object(de.jsx)("button",{className:"logDelBtn",onClick:function(){return n=u.self,r=c,console.log(n,r),void fetch("".concat(n),{method:"DELETE"}).then((function(e){return e.text()})).then((function(n){var c=e.filter((function(e,t){return t!==r}));t(q({savedLogs:c}))})).catch((function(e){return console.error(e)}));var n,r},children:"Delete log"})]}):Object(de.jsxs)("span",{style:{color:"red",marginLeft:"1em"},children:[" ",null===(o=u.errorMessages)||void 0===o?void 0:o.join(",")]})]},c)}))})]}):Object(de.jsx)(ge,{})})}function ye(){var e=Object(l.c)((function(e){return e.options.autoComment})),t=Object(l.b)();return Object(de.jsxs)("div",{className:"autoCommentContainer",children:[Object(de.jsx)("input",{type:"checkbox",id:"autoComment",value:e,onChange:function(){t({type:p})}}),Object(de.jsx)("label",{htmlFor:"autoComment",children:"Auto Comment"})]})}function ke(){var e=Object(l.c)((function(e){return e.options.showTask})),t=Object(l.b)();return Object(de.jsxs)("div",{className:"showTask-Container",children:[Object(de.jsx)("input",{type:"checkbox",id:"showTaskCheckbox",value:e,onChange:function(){t({type:k})}}),Object(de.jsx)("label",{htmlFor:"showTaskCheckbox",children:"Show Sub Tasks"})]})}function we(){return Object(de.jsxs)("div",{className:"includeOptions",children:[Object(de.jsx)(ye,{}),Object(de.jsx)(ke,{})]})}function Se(){return Object(de.jsx)("footer",{children:Object(de.jsx)("span",{children:"- Developed by Irfan G G"})})}var Te=function(){var e=Object(l.b)();return Object(s.useEffect)((function(){chrome.tabs&&chrome.tabs.query({active:!0,lastFocusedWindow:!0},(function(t){var n=t[0].url;console.log(n),e({type:y,payload:{domain:n.split("/")[2]}})}))}),[]),Object(de.jsxs)("div",{className:"App",children:[Object(de.jsx)(Oe,{}),Object(de.jsx)(we,{}),Object(de.jsx)(pe,{}),Object(de.jsx)(he,{}),Object(de.jsx)(xe,{}),Object(de.jsx)(Se,{})]})},Ne=document.getElementById("root");u.a.render(Object(de.jsx)(l.a,{store:je,children:Object(de.jsx)(Te,{})}),Ne)}});
//# sourceMappingURL=main.js.map